# 2.1 타입이란

## 자료형으로서의 타입

모든 프로그래밍 언어는 변수를 선언하는 것부터 시작한다. 프로그래밍 언어에서 변수란 값을 저장할 수 있는 공간이자 값을 가리키는 상징적인 이름이다. 개발자는 변수를 선언하고 그 변수에 특정한 값인 데이터를 할당한다.

이때 컴퓨터의 메모리 공간은 한정적이다. 따라서 값의 크기를 명시하면 컴퓨터가 값을 효율적이고 안전하게 저장할 수 있다.

이를 위해 이를 위해 최신 ECMAScript 표준을 따르는 자바스크립트는 아래의 7가지 데이터타입을 정의한다. 이와 같은 유형을 **데이터 타입** 또는 **자료형**이라고 한다.

- undefined
- null
- Boolean
- String
- Symbol
- Numeric (Number와 BigInt)
- Object

**데이터 타입은 컴파일러에 값의 형태를 알려주는 분류 체계로, 메모리 관점에서의 데이터 타입은 프로그래밍 언어에서 일반적으로 타입으로 부르는 개념과 같다.** 개발자는 타입을 사용해서 값의 종류를 명시할 수 있고 메모리를 더욱 효율적으로 사용할 수 있다.

<br />

## 집합으로서의 타입

프로그래밍에서의 타입은 수학의 집합과 유사하며, 값이 가질 수 있는 유효한 범위의 집합을 의미한다.

타입 시스템은 코드에서 사용되는 유효한 값의 범위를 제한해서 **런타임에서 발생할 수 있는 유효하지 않은 값에 대한 에러를 방지**해준다. _<span style="color:gray">(어떤 값이 T 타입이라면 컴파일러(또는 개발자)는 이 값으로 어떤 일을 할 수 있는지 사전에 알 수 있다.)<span>_

```tsx
const num: number = 123;
const str: string = "abc";

function func(n: number) {
  // ...
}

func(str); // Argument of type 'string' is not assignable to parameter of type 'number'
```

위 예시를 보면, `func()`이라는 함수의 인자로 `number`타입 값만 할당할 수 있도록 제한되어 있다면, `number`의 집합에 속하지 않는 `string`타입의 `str`을 `func()`함수의 인자로 사용할 때 에러가 발생한다.

이는 타입이 마치 집합의 경계처럼 `func()` 함수의 인자로 들어갈 수 있는 값을 `number`타입의 집합으로 제한하기 때문이다.

```tsx
// 타입이 명시되지 않았을 경우
function double(n) {
  return n * 2;
}
double(2); // 4
double("z"); // NaN

// 타입스크립트로 타입 명시했을 경우
function double(n: number) {
  return n * 2;
}

double(2); // 4
double("z"); // 🚨 Error: Argument of type 'string' is not assignable to parameter of type 'number'.(2345)
```

`double()` 함수는 숫자를 인자로 받아 그 숫자를 두 배로 반환하는 함수이다. 만약 숫자가 아닌 다른 타입의 값을 인자로 전달하면, 의도치 않은 작업을 수행하여 원하는 값을 얻지 못할 수 있다. (ex. `NaN` )

하지만 함수의 매개변수 타입을 명시하게되면, 타입 타입스크립트 컴파일러는 함수를 호출할 때 호환되는 인자로 호출했는지를 판단하고 만약 올바르지 않은 타입의 값으로 함수를 호출했을 경우 곧바로 에러를 발생시킨다.

예를 들어, `double(2)`는 `number` 타입의 인자를 전달하므로 문제 없이 컴파일되지만, `double("z")`는 `string` 타입의 인자를 전달하므로 에러가 발생한다. 이는 타입이 함수의 매개변수에 대한 값의 범위를 제한하기 때문이다.

<br />

## 정적 타입과 동적 타입

타입을 결정하는 시점에 따라 정적 타입과 동적 타입으로 분류할 수 있다.

- 정적 타입 시스템
  - **모든 변수의 타입이 컴파일 타임에 결정**되며, 컴파일 타임에 타입 에러를 발견할 수 있어 프로그램의 안정성을 보장할 수 있다.
  - 코드 수준에서 개발자가 타입을 명시해줘야하는 C, Java, TypeScript등이 정적 타입 언어에 속한다.
- 동적 타입 시스템
  - **변수 타입이 런타임에서 결정**되며, 개발자가 직접 타입을 정의해 줄 필요가 없다. 하지만 프로그램을 실행할 때 에러가 발견될 수 있다.
  - Python, 자바스크립트가 대표적인 동적 타입 언어로, 개발자는 직접 타입을 정의해줄 필요가 없다.

<br />

> <aside style="border">
> <p>
> 📚 컴파일 타입과 런타임
> </p>
>
> 개발자가 작성한 소스코드를 실행하려면 몇 가지 과정을 거쳐야 하는데, 시점에 따라 컴파일타임과 런타임으로 구분할 수 있다.
>
> 기계(컴퓨터, 엔진)가 소스코드를 이해할 수 있도록 기계어로 변환되는 시점을 컴파일타임이라고 하며,
> 이후 변환된 파일이 메모리에 적재되어 실행되는 시점을 런타임이라고 부른다.
>
> </aside>

<br />

## 강타입과 약타입

개발자가 의도적으로 타입을 명시하거나 바꾸지 않았는데도 컴파일러 또는 엔진 등에 의해서 런타임에 타입이 자동으로 변경되는 것을 **암묵적 타입 변환**이라고 한다.

암묵적 타입 변환 여부에 따라 타입 시스템을 **강타입**과 **약타입**으로 분류할 수 있다.

- 강타입
  - 서로 다른 타입을 갖는 값 끼리 연산을 시도하면 컴파일러 또는 인터프리터에서 에러가 발생한다.
- 약타입
  - 서로 다른 타입을 갖는 값 끼리 연산할 때는 컴파일러 또는 인터프리터가 내부적으로 판단해서 특정 값의 타입을 변환하여 연산을 수행한 후 값을 도출한다.

```jsx
// 자바스크립트 - 약타입

console.log("2" - 1); // 1
```

자바스크립트는 약타입 언어로, 타입이 명백하게 잘못 작성된 코드도 암묵적 타입 변환을 수행하여 결과를 도출하게 된다. 이는 예기치 못한 오류를 발생시킬 가능성이 있으므로 타입 안정성을 유지하는 것이 중요하다.

```tsx
// 타입스크립트 - 강타입

console.log("2" - 1); // "2" error
// type error
// The left-hand side of an arithmetic operation must be of type ‘any’, ‘number’, ‘bigint’ or an enum type.
```

타입 검사기가 프로그램에 타입을 할당하는 데 사용하는 규칙 집합을 타입 시스템이라고 하는데, 크게 두 가지로 구분한다. 타입스크립트는 이 두 가지 방식을 모두 사용할 수 있고, 이를 통해 코드의 안정성과 가독성을 높일 수 있다.

- **명시적 타입 시스템** : 개발자가 직접 타입을 명시해줘야 한다.
- **자동 타입 추론 시스템** : 컴파일러가 자동으로 타입을 추론한다.

<br />

## 컴파일 방식

컴파일은 앞서 컴파일 타임에서 언급했듯, 일반적인 의미로는 사람이 이해할 수 있는 방식으로 작성한 코드를 컴퓨터가 이해할 수 있는 기계어로 바꿔주는 과정을 말한다. 언어마다 컴파일 과정과 단계에 조금씩 차이가 있지만 기본적으로 컴파일은 서로 다른 수준(고수준 - 저수준) 간의 코드 변환을 의미한다.

하지만 타입스크립트의 컴파일 결과물은 여전히 사람이 이해할 수 있는 방식인 자바스크립트 파일이다. 타입스크립트가 탄생한 이유는 자바스크립트의 타입 에러를 컴파일 타임에 미리 발견하기 위해 만들어졌기 때문이므로, 컴파일 시 타입 정보가 없는 순수 자바스크립트 코드를 생성한다.

이처럼 타입스크립트는 다른 타입의 개념을 사용하는 언어와는 구별되는 특징을 갖고 있으며, 타입스크립트를 자바스크립트에 타입이라는 레이어를 끼얹은 일종의 템플릿 언어 또는 확장언어로 해석하는 의견도 있다.
