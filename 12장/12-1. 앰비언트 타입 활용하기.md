# 12.1 μ•°λΉ„μ–ΈνΈ νƒ€μ… ν™μ©ν•κΈ°

νƒ€μ…μ¤ν¬λ¦ΌνΈ ν”„λ΅μ νΈμ—μ„ μ•°λΉ„μ–ΈνΈ νƒ€μ…μ„ ν™μ©ν•  μ μλ” λ°©λ²•μ— λ€ν•΄ μ•μ•„λ³΄μ. μ•°λΉ„μ–ΈνΈ νƒ€μ…μ κ°λ…λΏ μ•„λ‹λΌ ν¨κ³Όμ μΌλ΅ μ‚¬μ©ν•  μ μλ” λ°©λ²•μ„ μ†κ°ν•λ©°, λ°°λ―Όμ—μ„ μ‹¤μ λ΅ `declare` ν‚¤μ›λ“λ¥Ό ν™μ©ν• μ‚¬λ΅€λ¥Ό λ³΄μ.

## 1. μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έ

νƒ€μ…μ¤ν¬λ¦½νΈμ νƒ€μ… μ„ μ–Έμ€ .ts λλ” .tsx ν™•μ¥μλ¥Ό κ°€μ§„ νμΌμ—μ„ ν•  μ μμ§€λ§ .d.ts ν™•μ¥μλ¥Ό κ°€μ§„ νμΌμ—μ„λ„ μ„ μ–Έν•  μ μλ‹¤.

### μ•°λΉ„μ–ΈνΈ νƒ€μ…μ„ μ–Έ

.d .ts ν™•μ¥μλ¥Ό κ°€μ§„ νμΌμ—μ„λ” νƒ€μ… μ„ μ–Έλ§ ν•  μ μμΌλ©° κ°’μ„ ν‘ν„ν•  μλ” μ—†λ‹¤. κ°’μ„ ν¬ν•¨ν•λ” μΌλ°μ μΈ μ„ μ–Έκ³Ό κµ¬λ³„ν•κΈ° μ„ν•΄ .d.ts ν™•μ¥μλ¥Ό κ°€μ§„ νμΌμ—μ„ ν•λ” νƒ€μ… μ„ μ–Έμ„ μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ΄λΌκ³  λ¶€λ¥Έλ‹¤.

> μ•°λΉ„μ–ΈνΈλ” μ‚¬μ „μ μΌλ΅ 'μ£Όλ³€μ' λΌλ” μλ―Έλ¥Ό κ°€μ§„λ‹¤.

μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–ΈμΌλ΅ κ°’μ„ μ •μν•  μλ” μ—†μ§€λ§ declareλΌλ” ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•μ—¬ μ–΄λ”κ°€μ— μλ°”μ¤ν¬λ¦½νΈ κ°’μ΄ μ΅΄μ¬ν•λ‹¤λ” μ‚¬μ‹¤μ„ μ„ μ–Έν•  μ μλ‹¤.

> declareλ” νƒ€μ…μ¤ν¬λ¦½νΈ μ»΄νμΌλ¬μ— μ–΄λ–¤ κ²ƒμ μ΅΄μ¬ μ—¬λ¶€λ¥Ό λ…μ‹ν•΄μ£Όλ” μ—­ν• μ„ ν•λ‹¤. λ‹¨μν μ΅΄μ¬ μ—¬λ¶€λ§ μ•λ ¤μ£ΌκΈ° λ•λ¬Έμ— μ»΄νμΌ λ€μƒμ΄ μ•„λ‹λ‹¤.

### λ€ν‘μ μΈ μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έ ν™μ© μ‚¬λ΅€

νƒ€μ…μ¤ν¬λ¦½νΈλ¥Ό μ‚¬μ©ν•λ‹¤ λ³΄λ©΄ _.js λλ” _.ts ν•μ‹μ΄ μ•„λ‹ νμΌμ„ μ„ν¬νΈν•  λ• μΆ…μΆ… μ—λ¬κ°€ λ°μƒν•λ” κ²ƒμ„ λ³΄κ² λλ‹¤. μλ¥Ό λ“¤μ–΄ μλ°”μ¤ν¬λ¦½νΈλ΅ png λ“± μ΄λ―Έμ§€ νμΌμ„ λ¨λ“λ΅ μ„ν¬νΈν•  λ•, μλ°”μ¤ν¬λ¦½νΈ ν™κ²½μ—μ„λ” λ©€μ©΅ν λ™μ‘ν•λ κ² νƒ€μ…μ¤ν¬λ¦½νΈ ν™κ²½μ—μ„λ” μ—λ¬κ°€ λ°μƒν•λ” μƒν™©μ΄ μ—°μ¶λκ³¤ν•λ‹¤.

νƒ€μ…μ¤ν¬λ¦½νΈλ” κΈ°λ³Έμ μΌλ΅ .tsμ™€ .js νμΌλ§ μ΄ν•΄ν•λ©° κ·Έ μ™Έμ λ‹¤λ¥Έ νμΌ ν•μ‹μ€ μΈμ‹ν•μ§€ λ»ν•λ‹¤. λ”°λΌμ„ μ•μ§€ λ»ν•λ” νμΌ ν•μ‹μ„ λ¨λ“λ΅ κ°€μ Έμ¤λ ¤ ν•λ©΄ μ—λ¬κ°€ λ°μƒν•λ‹¤. μ΄λ° μƒν™©μ—μ„ νƒ€μ…μ¤ν¬λ¦½νΈμ declare ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•μ—¬ μ•„λμ™€ κ°™μ΄ νΉμ • ν•μ‹μ„ λ¨λ“λ΅ μ„ μ–Έν•λ©΄ νƒ€μ…μ¤ν¬λ¦½νΈ μ»΄νμΌλ¬μ— λ―Έλ¦¬ μ •λ³΄λ¥Ό μ κ³µν•¨μΌλ΅μ¨ μ—λ¬λ¥Ό μμ •ν•  μ μκ² λλ‹¤.

```ts
declare module "*.png" {
  const src: string;
  export default src;
}
```

λ³΄λ‹¤μ‹ν”Ό declare ν‚¤μ›λ“λ” μ΄λ―Έ μ΅΄μ¬ν•μ§€λ§ νƒ€μ…μ¤ν¬λ¦½νΈκ°€ μ•μ§€ λ»ν•λ” λ¶€λ¶„μ„ μ»΄νμΌλ¬μ— "μ΄λ¬ν• κ²ƒμ΄ μ΅΄μ¬ν•΄" λΌκ³  μ•λ ¤μ£Όλ” μ—­ν• μ„ ν•λ‹¤.

### μλ°”μ¤ν¬λ¦½νΈλ΅ μ‘μ„±λ λΌμ΄λΈλ¬λ¦¬

JSλ΅ μ‘μ„±λ npm λΌμ΄λΈλ¬λ¦¬κ°€ μλ‹¤κ³  κ°€μ •ν•΄λ³΄μ. μ΄ λΌμ΄λΈλ¬λ¦¬μ—λ” JSλ΅ κµ¬ν„λμ—κΈ°μ— νƒ€μ… μ„ μ–Έμ΄ μ΅΄μ¬ν•μ§€ μ•λ”λ‹¤. λ”°λΌμ„ νƒ€μ…μ¤ν¬λ¦½νΈμ—μ„ μ΄ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•  μλ” μμ§€λ§ νƒ€μ… μ„ μ–Έμ΄ μ—†μΌλ―€λ΅ μ„ν¬νΈν• λ¨λ“μ€ λ¨λ‘ `any`λ΅ μ¶”λ΅ λ  κ²ƒμ΄λ‹¤. λ§μ•½ `tsconfig.json` νμΌμ—μ„ `any`λ¥Ό μ‚¬μ©ν•μ§€ λ»ν•κ² μ„¤μ •ν–λ‹¤λ©΄ ν”„λ΅μ νΈκ°€ λΉλ“λμ§€ μ•μ„ κ²ƒ μ΄λ‹¤.

μ΄λ• μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ„ μ‚¬μ©ν•  μ μλ‹¤. μλ°”μ¤ν¬λ¦½νΈ λΌμ΄λΈλ¬λ¦¬ λ‚΄λ¶€ ν•¨μμ™€ λ³€μμ νƒ€μ…μ„ μ•°λΉ„μ–ΈνΈ νƒ€μ…μΌλ΅ μ„ μ–Έν•λ©΄ νƒ€μ…μ¤ν¬λ¦½νΈλ” μλ™μΌλ΅ .d.ts ν™•μ¥μλ¥Ό κ°€μ§„ νμΌμ„ κ²€μƒ‰ν•μ—¬ νƒ€μ… κ²€μ‚¬λ¥Ό μ§„ν–‰ν•κ² λλ―€λ΅ λ¬Έμ μ—†μ΄ μ»΄νμΌλλ‹¤. λν• VsCodeμ™€ κ°™μ€ μ½”λ“ νΈμ§‘κΈ°λ„ .d.ts ν™•μ¥μλ¥Ό κ°€μ§„ νμΌμ„ ν•΄μ„ν•μ—¬ μ½”λ“λ¥Ό μ‘μ„±ν•  λ• μ μ©ν• νƒ€μ… ννΈλ¥Ό μ κ³µν•λ‹¤.

μλ¥Ό λ“¤μ–΄ `@types/react`λ¥Ό `npm install -D` λ…λ Ήμ„ ν†µν•΄ μ„¤μΉν•λ©΄ `node_modules/@types/react`μ— `index.d.ts`μ™€ `global.d.ts`κ°€ μ„¤μΉλλ‹¤. μ΄λ¬ν• νμΌμ—λ” λ¦¬μ•΅νΈμ μ»΄ν¬λ„νΈμ™€ ν›…μ— λ€ν• νƒ€μ…μ΄ μ •μλμ–΄ μλ‹¤. λ”μ± ν¥λ―Έλ΅μ΄ μ μ€ tscλ” λ³„λ„μ μ„¤μ • μ—†μ΄λ„ `node_modules/@types/react` λ””λ ‰ν„°λ¦¬μ— μλ” νƒ€μ… μ„ μ–Έμ„ νƒ€μ… κ²€μ‚¬μ— ν™μ©ν•λ‹¤λ” κ²ƒμ΄λ‹¤. μ•μ„ μ–ΈκΈ‰ν• λ€λ΅ VSCodeλ” `index.d.ts`μ™€ `global.d.ts`νμΌμ„ ν™μ©ν•μ—¬ μ½”λ“ μ‘μ„± μ‹ μ μ©ν• νƒ€μ… ννΈλ¥Ό μ κ³µν•λ‹¤.

- μ¦‰, μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ€ νƒ€μ…μ¤ν¬λ¦½νΈμ—κ² 'μλ°”μ¤ν¬λ¦½νΈ μ½”λ“ μ•μ—λ” μ΄λ¬ν• μ •λ³΄λ“¤μ΄ μμ–΄' λΌκ³  μ•λ ¤μ£Όλ” λ„κµ¬λΌκ³  μ΄ν•΄ν•λ©΄ λλ‹¤.

### νƒ€μ…μ¤ν¬λ¦½νΈλ΅ μ‘μ„±λ λΌμ΄λΈλ¬λ¦¬

TSλ΅ μ‘μ„±λ λΌμ΄λΈλ¬λ¦¬μΌμ§€λΌλ„ JSνμΌκ³Ό .d.ts νμΌλ΅ λ°°ν¬λλ” κ²ƒμ΄ μΌλ°μ μ΄λ‹¤.
νƒ€μ…μ¤ν¬λ¦½νΈ νμΌμ„ μ§μ ‘ λ°°ν¬ν•μ—¬ λΌμ΄λΈλ¬λ¦¬ μ‚¬μ©μκ°€ TSλ¥Ό μ»΄νμΌν•  λ• λΌμ΄λΈλ¬λ¦¬ μ½”λ“λ„ ν•¨κ» μ»΄νμΌν•κ² ν•  μλ„ μλ‹¤.

κ·Έλ¬λ‚ JSνμΌκ³Ό .d.ts νμΌλ΅ λ°°ν¬ν•λ©΄ λΌμ΄λΈλ¬λ¦¬ μ½”λ“λ¥Ό λ”°λ΅ μ»΄νμΌν•μ§€ μ•μ•„λ„ λκΈ° λ•λ¬Έμ— μ»΄νμΌ μ‹κ°„μ΄ ν¬κ² μ¤„μ–΄λ“ λ‹¤.

λν• .d.ts νμΌμ΄ μκΈ° λ•λ¬Έμ— μ‚¬μ©μλ” .d.ts νμΌμ— μ •μλ νƒ€μ… μ •λ³΄λ¥Ό ν™μ©ν•μ—¬ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•  μ μκ³ , `tsconfig.json` νμΌμ `declaration`μ„ trueλ΅ μ„¤μ •ν•λ©΄ νƒ€μ…μ¤ν¬λ¦½νΈ μ»΄νμΌλ¬λ” μλ™μΌλ΅ .d.ts νμΌμ„ μƒμ„±ν•λ‹¤.

### μλ°”μ¤ν¬λ¦½νΈ μ–΄λ”κ°€μ— μ „μ—­ λ³€μκ°€ μ •μλμ–΄ μμμ„ νƒ€μ…μ¤ν¬λ¦½νΈμ—κ² μ•λ¦΄ λ•

TSλ΅ μ§μ ‘ κµ¬ν„ν•μ§€ μ•μ•μ§€λ§ μ‹¤μ  JS μ–΄λ”κ°€μ— μ „μ—­ λ³€μκ°€ μ •μλμ–΄ μλ” μƒν™©μ„ TSμ— μ•λ¦΄ λ• μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ„ ν™μ©ν•λ‹¤.

μλ¥Ό λ“¤μ–΄ μ›Ήλ·°λ¥Ό κ°λ°ν•  λ• λ„¤μ΄ν‹°λΈ μ•±κ³Όμ ν†µμ‹ μ„ μ„ν• μΈν„°νμ΄μ¤λ¥Ό λ„¤μ΄ν‹°λΈ μ•±μ΄ Window κ°μ²΄μ— μ¶”κ°€ν•λ” κ²½μ°κ°€ λ§λ‹¤. μ΄λ ‡κ² μ „μ—­ κ°μ²΄μΈ Windowμ— λ³€μλ‚ ν•¨μλ¥Ό μ¶”κ°€ν•λ©΄ TSμ—μ„ μ§μ ‘ κµ¬ν„ν•μ§€ μ•μ•λ”λΌλ„ μ‹¤μ  λ°νƒ€μ„ ν™κ²½μ—μ„ ν•΄λ‹Ή λ³€μλ¥Ό μ‚¬μ©ν•  μ μλ‹¤.

λ„¤μ΄ν‹°λΈ μ•±μ—μ„ Window μ „μ—­ κ°μ²΄μ— deviceIdλ‚ appVersion κ°™μ€ κ°’μ„ ν• λ‹Ήν•΄μ£Όλ” μ‹λ‚λ¦¬μ¤λ¥Ό λ– μ¬λ ¤λ³΄μ. Window κ°μ²΄μ μ†μ„±μ€ TSλ΅ μ§μ ‘ μ •μν• κ°’μ΄ μ•„λ‹κΈ° λ•λ¬Έμ— TSλ” ν•΄λ‹Ή μ†μ„±μ΄ Window κ°μ²΄μ νƒ€μ…μ— μ΅΄μ¬ν•μ§€ μ•λ”λ‹¤κ³  νλ‹¨ν•λ‹¤. λ”°λΌμ„ ν•΄λ‹Ή μ†μ„±μ— μ ‘κ·Όν•λ ¤ ν•λ©΄ Window κ°μ²΄μ— μ΅΄μ¬ν•μ§€ μ•λ” μ†μ„±μ΄λΌλ” μ—λ¬κ°€ λ°μƒν•λ‹¤. μ΄λ• global namespaceμ— μλ” Window κ°μ²΄μ— ν•΄λ‹Ή μ†μ„±μ΄ μ •μλμ–΄ μλ‹¤λ” κ²ƒμ„ λ‚νƒ€λ‚΄κΈ° μ„ν•΄ μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ„ μ‚¬μ©ν•  μ μλ‹¤.

```ts
declare global {
  interface Window {
    deviceId: string | undefined;
    appVersion: string;
  }
}
```

## 2. μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ‹ μ£Όμμ 

### νƒ€μ…μ¤ν¬λ¦½νΈλ΅ λ§λ“λ” λΌμ΄λΈλ¬λ¦¬μ—λ” λ¶ν•„μ”

`tsconfig.json`μ `declaration`μ„ trueλ΅ μ„¤μ •ν•λ©΄ νƒ€μ…μ¤ν¬λ¦½νΈ μ»΄νμΌλ¬κ°€ .d.ts νμΌμ„ μλ™μΌλ΅ μƒμ„±ν•΄μ£ΌκΈ° λ•λ¬Έμ— μλ™μΌλ΅ .d.ts νμΌμ„ μ‘μ„±ν•  ν•„μ”κ°€ μ—†λ‹¤. λ”°λΌμ„ TSλ΅ λΌμ΄λΈλ¬λ¦¬λ¥Ό κ°λ°ν•  λ•λ” μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ„ μ‚¬μ©ν•  ν•„μ”κ°€ μ—†λ‹¤.

### μ „μ—­μΌλ΅ νƒ€μ…μ„ μ •μν•μ—¬ μ‚¬μ©ν•  λ• μ£Όμν•΄μ•Ό ν•  μ 

μ„λ΅ λ‹¤λ¥Έ λΌμ΄λΈλ¬λ¦¬μ—μ„ λ™μΌν• μ΄λ¦„μ μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ„ ν•λ‹¤λ©΄ μ¶©λμ΄ λ°μƒν•μ—¬ μ–΄λ–¤ νƒ€μ… μ„ μ–Έμ΄ μ μ©λ μ§€ μ•κΈ° μ–΄λ ¤μ°λ©°, μλ„ν• λ€λ΅ λ™μ‘ν•μ§€ μ•μ„ μ μλ‹¤. λν• μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ€ λ…μ‹μ μΈ importλ‚ exportκ°€ μ—†κΈ° λ•λ¬Έμ— μ½”λ“μ μμ΅΄μ„± κ΄€κ³„κ°€ λ…ν™•ν•μ§€ μ•μ•„ λ‚μ¤‘μ— λ³€κ²½ν•  λ• μ–΄λ ¤μ›€μ„ κ²μ„ μ μλ‹¤.

## 3. μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ„ μλ» μ‚¬μ©ν–μ„ λ•μ λ¬Έμ μ 

.ts νμΌ λ‚΄μ μ•°λΉ„μ–ΈνΈ λ³€μ μ„ μ–Έμ€ κ°λ°μμ—κ² νΌλ€μ„ μ•ΌκΈ°ν•  μ μλ‹¤. λ€ν‘μ μΌλ΅ .ts νμΌ λ‚΄λ¶€μ— μ•°λΉ„μ–ΈνΈ λ³€μλ¥Ό μ„ μ–Έν•  λ• μμ΅΄μ„± κ΄€κ³„κ°€ λ³΄μ΄μ§€ μ•κΈ° λ•λ¬Έμ— λ³€κ²½μ— μν• μν–¥ λ²”μ„λ¥Ό νμ•…ν•κΈ° μ–΄λ µλ‹¤. μ™λƒν•λ©΄ μ•°λΉ„μ–ΈνΈ νƒ€μ…μ€ λ…μ‹μ μΈ importλ‚ export μ—†μ΄ μ½”λ“ μ „μ—­μ—μ„ μ‚¬μ©κ°€λ¥ν•κΈ° λ•λ¬Έμ΄λ‹¤. νΉν μ†μ¤μ½”λ“ κ·λ¨κ°€ ν¬λ‹¤λ©΄ μ¶”ν›„ λ³€κ²½μ΄ μ–΄λ ¤μ›μ§ μ μλ‹¤.

λ‹¤μκ³Ό κ°™μ΄ `declare` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν• μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ€ .d.ts νμΌμ΄ μ•„λ‹ .ts, .tsx νμΌ λ‚΄μ—μ„λ„ ν•  μ μλ‹¤.

- src/index.tsx

```ts
import React from "react";
import ReactDOM from "react-dom";
import App from "App";

declare global {
  interface Window {
    Example: string;
  }
}

const SomeComponent = () => {
  return <div>μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ€ .tsxνμΌμ—μ„λ„ κ°€λ¥</div>;
};
```

μ΄λ ‡κ² μ„ μ–Έλ μ•°λΉ„μ–ΈνΈ νƒ€μ…μ€ μ•„λμ™€ κ°™μ€ src/test.tsx νμΌμ—μ„λ„ import μ—†μ΄ μ‚¬μ©κ°€λ¥ν•λ‹¤.

- src/test.tsx

```ts
window.Example; // μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–ΈμΌλ΅ μΈν•΄ TSμ—λ¬κ°€ λ°μƒν•μ§€ μ•μ
```

μ΄λ ‡λ“― μ•°λΉ„μ–ΈνΈ λ³€μ μ„ μ–Έμ€ μ–΄λ κ³³μ—μ„λ‚ μν–¥μ„ μ¤„ μ μκΈ° λ•λ¬Έμ— μΌλ° νƒ€μ… μ„ μ–Έκ³Ό μ„μ΄κ² λλ©΄ μ•°λΉ„μ–ΈνΈ μ„ μ–Έμ΄ μ–΄λ–¤ νμΌμ— ν¬ν•¨λμ–΄ μλ”μ§€ νμ•…ν•κΈ° μ–΄λ ¤μ›μ§„λ‹¤. μ•μ μμ‹λ” Window μ „μ—­ κ°μ²΄μ ν™•μ¥μ„ λ‚νƒ€λ‚΄κ³  μλ”λ° src/index.jsx λΌλ” μµμƒμ„ νμΌμ—μ„ μ•°λΉ„μ–ΈνΈ λ³€μ μ„ μ–Έμ„ ν–κΈ° λ•λ¬Έμ— κ·Έλ‚λ§ νμ•…ν•κΈ° μ‰½λ‹¤. ν•μ§€λ§ μ‘μ€ μ»΄ν¬λ„νΈμ— μ•°λΉ„μ–ΈνΈ λ³€μ μ„ μ–Έμ΄ ν¬ν•¨λμ–΄ μλ‹¤λ©΄ λ¨λ“  νμΌμ νƒ€μ…μ— μν–¥μ„ μ£ΌκΈ° λ•λ¬Έμ— μ–΄λ–¤ νμΌμ—μ„ μ•°λΉ„μ–ΈνΈ νƒ€μ…μ΄ μ„ μ–Έλμ—λ”μ§€ μ°ΎκΈ° μ–΄λ ¤μ›μ§„λ‹¤.

.d.ts ν™•μ¥μ νμΌ λ‚΄μ—μ„ μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ„ ν•λ” κ²ƒμ€ κ°λ°μ κ°„μ μΌμΆ…μ μ•½μ†μ΄λ‹¤. νƒ€μ… μ„ μ–Έ μ„μΉκ°€ λ…ν™•ν•΄μ•Ό κ°€λ…μ„±μ΄ λ†’μ•„μ§€κ³  μ μ§€λ³΄μλ„ νΈν•κ² ν•  μ μκΈ° λ•λ¬Έμ΄λ‹¤.

## 4. μ•°λΉ„μ–ΈνΈ νƒ€μ… ν™μ©ν•κΈ°

TS μ»΄νμΌλ¬μ— νƒ€μ… μ •λ³΄λ¥Ό μ•λ ¤μ£Όλ” `declare` ν‚¤μ›λ“λ¥Ό λ” ν¨κ³Όμ μΌλ΅ ν™μ©ν•  μ μλ” λ°©λ²•μ„ μ‚΄ν΄λ³΄μ.

### νƒ€μ…μ„ μ •μν•μ—¬ import μ—†μ΄ μ „μ—­μΌλ΅ κ³µμ 

.d.ts νμΌμ—μ„μ μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ€ μ „μ—­ λ³€μμ™€ κ°™μ€ μ—­ν• μ„ ν•λ‹¤. λ”°λΌμ„ μ•°λΉ„μ–ΈνΈ νƒ€μ…μ„ μ„ μ–Έν•λ©΄ λ¨λ“  μ½”λ“ λ‚΄μ—μ„ importν•μ§€ μ•κ³  μ‚¬μ©ν•  μ μλ‹¤. κ°€λ Ή μ μ©ν• μ ν‹Έλ¦¬ν‹° νƒ€μ…μ„ μ‘μ„±ν–λ‹¤κ³  κ°€μ •ν•΄λ³΄μ. μ΄λ ‡κ² μ•°λΉ„μ–ΈνΈ νƒ€μ…μΌλ΅ μ ν‹Έλ¦¬ν‹° νƒ€μ…μ„ μ„ μ–Έν•λ©΄ λ¨λ“  μ½”λ“μ—μ„ import ν•μ§€ μ•μ•„λ„ ν•΄λ‹Ή νƒ€μ…μ„ μ‚¬μ©ν•  μ μλ‹¤. λ§μΉ λ‚΄μ¥ νƒ€μ… μ ν‹Έλ¦¬ν‹° ν•¨μλ¥Ό μ‚¬μ©ν•λ” κ²ƒμ²λΌ λ§μ΄λ‹¤.

```ts
// src/index.d.ts
type Optional<T extends object, K extends keyof T = keyof T> = Omit<T, K> &
  Partial<Pick<T, K>>;

// src/components.ts
type Props = { name: string; age: number; visible: boolean };
type OptionalProps = Optional<Props>; // Expect: { name?: string; age?: number; visible?: boolean; }
```

### declare type ν™μ©ν•κΈ°

λ³΄νΈμ μΌλ΅ λ§μ΄ μ‚¬μ©ν•λ” μ»¤μ¤ν…€ μ ν‹Έλ¦¬ν‹° νƒ€μ…μ„ `declare type` μΌλ΅ μ„ μ–Έν•μ—¬ μ „μ—­μ—μ„ μ‚¬μ©ν•  μ μλ‹¤. μ•„λ μμ‹μ²λΌ Nullable νƒ€μ…μ„ μ„ μ–Έν•΄μ„ μ–΄λ””μ—μ„λ“  μ‰½κ² μ‚¬μ©ν•  μ μλ‹¤.

```ts
declare type Nullable<T> = T | null;

const name: Nullable<string> = "woowa";
```

### declare module ν™μ©ν•κΈ°

CSS-in-JS λΌμ΄λΈλ¬λ¦¬μ μ‚¬λ΅€λ¥Ό μ‚΄ν΄λ³΄μ. themeμ μΈν„°νμ΄μ¤ νƒ€μ…μ„ ν™•μ¥ν•μ—¬ theme νƒ€μ…μ΄ μλ™μΌλ΅ μ™„μ„±λλ„λ΅ ν•λ” κΈ°λ¥μ΄ μ¶”κ°€λμ—λ‹¤. CSS-in-JS λΌμ΄λΈλ¬λ¦¬λ” κΈ°μ΅΄μ ν°νΈ ν¬κΈ°, μƒ‰μƒ λ“±μ„ κ°μ²΄λ΅ κ΄€λ¦¬ν•λ‹¤. μ΄λ ‡κ² μ •μλ themeμ—μ„ μ¤νƒ€μΌ κ°’μ„ κ°€μ Έμ™€ κΈ°μ΅΄ μΈν„°νμ΄μ¤ νƒ€μ…κ³Ό ν†µν•©ν•μ—¬ theme νƒ€μ…μ΄ μλ™μΌλ΅ μ™„μ„±λλ” κΈ°λ¥μ„ μ§€μ›ν•κ³  μλ‹¤.

```ts
const fontSizes = {
  xl: "30px",
  // ...
};

const colors = {
  gray_100: "#222222",
  gray_200: "#444444",
  // ...
};

const depths = {
  origin: 0,
  foreground: 10,
  dialog: 100,
  // ...
};

const theme = {
  fontSizes,
  colors,
  depths,
};

declare module "styled-components" {
  type Theme = typeof theme;

  export interface DefaultTheme extends Theme {}
}
```

μ΄μ™Έμ—λ„ λ΅μ»¬ μ΄λ―Έμ§€λ‚ SVG κ°™μ΄ μ™Έλ¶€λ΅ λ…Έμ¶λμ–΄ μμ§€ μ•μ€ νμΌμ„ λ¨λ“λ΅ μΈμ‹ν•μ—¬ μ‚¬μ©ν•κ²λ” λ§λ“¤ μ μλ‹¤.

```ts
declare module "#.gif" {
  const src: string;

  export default src;
}
```

### declare namespace ν™μ©ν•κΈ°

Node.js ν™κ²½μ—μ„ .env νμΌμ„ μ‚¬μ©ν•  λ•, declare namespaceλ¥Ό ν™μ©ν•μ—¬ process.envλ΅ μ„¤μ •κ°’μ„ μ†μ‰½κ² λ¶λ¬μ¤κ³  ν™κ²½λ³€μμ μλ™μ™„μ„± κΈ°λ¥μ„ μ“Έ μ μλ‹¤.

```ts
declare namespace NodeJS {
  interface ProcessEnv {
    readonly API_URL: string;
    readonly API_INTERNAL_URL: string;
    // ...
  }
}
```

μ•κ³Ό κ°™μ΄ process.envλ¥Ό ν†µν•΄ μ ‘κ·Όν•λ” λ³€μ λν• νƒ€μ…μ„ μ§€μ •ν•  μ μκΈ° λ•λ¬Έμ— as λ‹¨μ–Έμ„ μ‚¬μ©ν•μ§€ μ•μ•„λ„ λλ‹¤. μ•„λμ™€ κ°™μ€ ν•¨μ μμ‹λ¥Ό ν†µν•΄ νƒ€μ…μ„ λ³΄κ°•ν• κ²½μ°μ™€ κ·Έλ ‡μ§€ μ•μ€ κ²½μ°λ¥Ό λΉ„κµν•μ—¬ κ°λ…μ„ μ΄ν•΄ν•  μ μλ‹¤.

```ts
function log(str: string) {
  console.log(str);
}
```

1. namespaceλ¥Ό ν™μ©ν•μ—¬ process.env νƒ€μ…μ„ λ³΄κ°•ν•΄μ£Όμ§€ μ•μ€ κ²½μ°

```ts
// .env
API_URL = "localhost:8080";

log(process.env.API_URL as string);
```

2. namespaceλ¥Ό ν™μ©ν•μ—¬ process.env νƒ€μ…μ„ λ³΄κ°•ν• κ²½μ°

```ts
// .env
API_URL = "localhost:8080";

declare namespace NodeJS {
  interface ProcessEnv {
    readonly API_URL: string;
  }
}

log(process.env.API_URL);
```

### declare global ν™μ©ν•κΈ°

declare global ν‚¤μ›λ“λ” μ „μ—­ λ³€μλ¥Ό μ„ μ–Έν•  λ• μ‚¬μ©ν•λ‹¤. μλ¥Ό λ“¤μ–΄ μ „μ—­ λ³€μμΈ Window κ°μ²΄μ μ¤μ½”ν”„μ—μ„ μ‚¬μ©λλ” λ¨λ“μ΄λ‚ λ³€μλ¥Ό μ¶”κ°€ν•  μ μλ‹¤.

```ts
declare global {
  interface Window {
    newProperty: string;
  }
}
```

μ•μ μ½”λ“μ²λΌ μ „μ—­ λ³€μμΈ Window κ°μ²΄μ newProperty μ†μ„±μ„ μ¶”κ°€ν• κ²ƒκ³Ό κ°™μ€ λ™μ‘μ„ κµ¬ν„ν•  μ μλ‹¤. λ€ν‘μ μΌλ΅ λ„¤μ΄ν‹°λΈ μ•±κ³Όμ ν†µμ‹ μ„ μ„ν• μΈν„°νμ΄μ¤λ¥Ό Window κ°μ²΄μ— μ¶”κ°€ν•  λ• μ•°λΉ„μ–ΈνΈ νƒ€μ… μ„ μ–Έμ„ ν™μ©ν•  μ μλ‹¤

λ‹¤μ μ½”λ“λ” iOS μ›Ήλ·°μ—μ„ μλ°”μ¤ν¬λ¦½νΈλ΅ λ„¤μ΄ν‹°λΈ ν•¨μλ¥Ό νΈμ¶ν•κΈ° μ„ν• ν•¨μλ¥Ό μ •μν• κ²ƒμ΄λ‹¤. μ΄λ¥Ό ν†µν•΄ λ„¤μ΄ν‹°λΈ μ•±κ³Όμ ν†µμ‹ μ„ μ„ν• ν•¨μλ¥Ό νΈμ¶ν•  λ•, μλ™ μ™„μ„± κΈ°λ¥μ„ ν™μ©ν•μ—¬ μ‹¤μλ¥Ό μ¤„μΌ μ μλ‹¤.

```ts
declare global {
  interface Window {
    webkit?: {
      messageHandlers?: Record<
        string,
        {
          postMessage?: (paremeter: string) => void;
        }
      >;
    };
  }
}
```

κ²°κ³Όμ μΌλ΅ μ½”λ“μ—λ””ν„° μ°½μ—μ„ λ―Έλ¦¬λ³΄κΈ°λ΅ μλ™μΌλ΅ μ™„μ„±λλ‹¤.

## 5. declareμ™€ λ²λ“¤λ¬μ μ‹λ„μ§€

declare globalλ΅ μ „μ—­ λ³€μλ¥Ό μ„ μ–Έν•λ” κ³Όμ •κ³Ό λ²λ“¤λ¬λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό μ£Όμ…ν•λ” μ μ°¨λ¥Ό ν•¨κ» ν™μ©ν•λ©΄ μ‹λ„μ§€λ¥Ό λ‚Ό μ μλ‹¤.

```ts
const color = {
  white: "#ffffff",
  black: "#000000",
} as const;

type ColorSet = typeof color;

declare global {
  const _color: ColorSet;
}
```

μ•κ³Ό κ°™μ΄ μ „μ—­μ— \_colorλΌλ” λ³€μκ°€ μ΅΄μ¬ν•¨μ„ TS μ»΄νμΌλ¬μ— μ•λ¦¬λ©΄ ν•΄λ‹Ή κ°μ²΄λ¥Ό ν™μ©ν•  μ μλ‹¤.

```ts
const white = _color["white"];
```

ν•μ§€λ§ μ•„μ§ ColorSet νƒ€μ…μ„ κ°€μ§€κ³  μλ” \_color κ°μ²΄μ μ‹¤μ  λ°μ΄ν„°κ°€ μ΅΄μ¬ν•μ§€ μ•λ”λ‹¤. λ‹¤μ‹ λ§ν•΄ μ•μ μ½”λ“λ” TS μ—λ¬λ¥Ό λ°μƒμ‹ν‚¤μ§€ μ•μ§€λ§, μ½”λ“κ°€ μ‹¤ν–‰λ  κ²½μ°μ—λ” μ‹¤μ  λ°μ΄ν„°κ°€ μ—†κΈ° λ•λ¬Έμ— κΈ°λ€ν•λ” λ™μ‘κ³Ό λ‹¤λ¥Ό μ μλ‹¤.

μ΄λ¬ν• λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν• λ°©λ²• μ¤‘ ν•λ‚κ°€ λ²λ“¤ μ‹μ μ— λ²λ“¤λ¬λ¥Ό ν†µν•΄μ„ ν•΄λ‹Ή λ°μ΄ν„°λ¥Ό μ£Όμ…ν•λ” κ²ƒμ΄λ‹¤.

λ‹¤μμ€ λ΅¤μ—… λ²λ“¤λ¬μ inject λ¨λ“λ΅ λ°μ΄ν„°λ¥Ό μ£Όμ…ν•λ” μμ‹λ¥Ό λ‚νƒ€λ‚Έ κ²ƒμ΄λ‹¤.

μ°μ„  μ „μ²΄μ μΈ ν΄λ” κµ¬μ΅°λ” μ•„λμ™€ κ°™λ‹¤.

<img width="362" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2024-05-22 05 58 19" src="https://github.com/team-Palindrome/TypeScript-Study/assets/126459089/7bd72d50-6fea-4e6e-9766-795ded542de7">

```ts
// data.ts
export const color = {
  white: "#ffffff",
  black: "#000000",
} as const;

// type.ts
import { color } from "./data";
type ColorSet = typeof color;

declare global {
  const _color: ColorSet;
}

// index.ts
console.log(_color["white"]);

// rollup.config.js
import inject from "@rollup/plugin-inject";
import typescript from "#rollup/plugin-typescript";

export default [
  {
    input: "index.ts",
    output: [
      {
        dir: "lib",
        format: "esm",
      },
    ],
    plugins: [typescript(), inject({ _color: ["./data", "color"] })],
  },
];
```

μ „μ²΄μ μΈ νλ¦„μ„ μ‚΄ν΄λ³΄λ©΄ data.tsμ—μ„ μƒ‰μƒμ„ μ •μν•κ³  μμΌλ©° type.tsμ—μ„λ” ν•΄λ‹Ή λ°μ΄ν„°λ΅λ¶€ν„° νƒ€μ…μ„ μ •μν•μ—¬ μ „μ—­μ μΌλ΅ μ„ μ–Έν•κ³  μλ‹¤.

index.ts νμΌμ—μ„λ” μ „μ—­ νƒ€μ…μΌλ΅ μ„ μ–Έλ λ³€μμΈ \_color["white"]λ¥Ό μ½μ†”λ΅ μ¶λ ¥ν•κ³  μλ‹¤. κ·Έλ¦¬κ³  κ°€μ¥ μ¤‘μ”ν• λ΅¤μ—… λ²λ“¤λ¬ μ„¤μ •μ—μ„ inject λ¨λ“μ„ μ‚¬μ©ν•μ—¬ \_colorμ— ν•΄λ‹Ήν•λ” λ°μ΄ν„°λ¥Ό μ‚½μ…ν•κ³  μλ‹¤.

> π’΅ inject λ¨λ“
>
> injectλ” importλ¬Έμ κ²½λ΅λ¥Ό λ¶„μ„ν•μ—¬ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¨λ‹¤.
>
> import { color } from "./data";
>
> ./dataμ κ²½λ΅μ—μ„ colorλ¥Ό κ°€μ Έμ¤λ” κ²½μ°, ["./data", "color"]λ΅ μ§€μ •ν•μ—¬ μ–΄λ–¤ λ°μ΄ν„° κ°’μ„ κ°€μ Έμ¬μ§€ λ…μ‹ν•  μ μλ‹¤.

ν•΄λ‹Ή λ²λ“¤ κ²°κ³Όλ¬Όμ„ μ‹¤ν–‰ν•λ©΄ #ffffffκ°€ μ •μƒμ μΌλ΅ μ¶λ ¥λλ‹¤.
