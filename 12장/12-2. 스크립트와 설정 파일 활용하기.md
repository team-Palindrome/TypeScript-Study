# 12.2 스크립트와 설정 파일 활용하기

타입스크립트 프로젝트에서 스크립트와 tsconfig 등을 잘 활용하면 개발 생산성을 높일 수 있다. 이 절에서는 타입스크립트 프로젝트를 관리할 때 알아두면 좋은 팁들을 소개한다.

## 1. 스크립트 활용하기

### 실시간으로 타입을 검사하자

일반적으로 TS 프로젝트에서는 에디터가 가능한 한 빠르게 타입 에러를 감지 해준다. 그러나 컴퓨터 성능이 떨어지거나 프로젝트 규모가 커지면 에디터(예: VSCode, Web-Storm)가 타입 에러를 알려주는 속도가 느려진다.

떄로는 검사하려는 특정 파일을 열어야만 타입 에러가 나타나기도 하며, 에디터에서 분명 에러가 없다고 확인하고 나서 커밋했는데 뒤늦게 깃훅 도구인 husky에 의해 타입 에러가 발견되기도 한다.

이럴 때는 아래 스크립트를 사용하여 실시간으로 에러를 확인할 수 있다.

```ts
yarn tsc --noEmit --incremental -w
```

이 스크립트는 프로젝트의 tsc(TS 컴파일러)를 실행한다.

- noEmit 옵션은 JS로된 출력 파일을 생성하지 않도록 설정한 것이다.
- incremental 옵션은 증분 컴파일을 활성화하여 컴파일 시간을 단축할 수 있게 해준다.
- w는 파일 변경 사항을 모니터링한다는 의미이다.

> 💡 증분 컴파일
>
> 매번 모든 대상을 컴파일 하는 것이 아니라 변경 사항이 있는 부분만을 컴파일하는 것을 말하며, 이를 활용하면 컴파일 시간을 줄일 수 있다.

터미널에서 앞의 스크립트를 실행하면 변경될 때마다 tsc가 실행되어 어디에서 타입에러가 발생했는지를 실시간으로 추적할 수 있다.

### 타입 커버리지 확인하기

타입스크립트를 사용하면서 `any` 타입을 이곳저곳 남발하면 타입스크립트의 장점을 활용하지 못할 수 있다. 따라서 현재 프로젝트에서 얼마나 타입스크립트를 적절하게 쓰고 있는지 확인할 필요가 있다. 프로젝트의 모든 부분이 TS 통제하에 돌아가고 있는지를 정량적으로 판단하기 위해 다음과 같은 스크립트를 활용할 수 있다.

```ts
npx type-coverage --detail
```

이 스크립트를 사용하면 현재 프로젝트의 타입 커버리지와 any를 사용하고 있는 변수의 위치가 나타난다. TS로 마이그레이션 중인 프로젝트나 레거시 코드가 많은 프로젝트를 다룰 때 타입 커버리지를 체크함으로써 더 나은 코드 퀄리티로 리팩터링 하기 위한 기반을 마련하는 데 도움이 되는 정량적인 지표를 얻을 수 있다.

## 2. 설정 파일 활용하기

### 타입스크립트 컴파일 속도 높이기

tsconfig의 incremental 속성을 활용하여 TS의 컴파일 속도를 높일 수 있다. incremental 속성을 true로 설정하면 증분 컴파일이 활성화되어 매번 모든 대상을 컴파일 하는 것이 아니라 변경된 부분만 컴파일하게 된다. 이로써 모든 대상을 컴파일하지 않아도 되므로 컴파일타임을 줄일 수 있다. 이 설정은 tsconfig 파일에 추가하거나 스크립트에서 사용 할 수 있다.

- tsconfig 파일에 설정 추가

```ts
// tsconfig에 추가
{
  "conpilerOptions": {
    ...
    incremental: true
  }
}
```

- 스크립트 활용

```ts
yarn tsc --noEmit --incremental --diagnostic
```

전체 시간을 비교해보면 incremental 속성을 적용했을 때가 기존보다 10초 이상 빨라진 것을 확인할 것이다. 특히 검사 시간의 차이가 확연하다.

## 3. 에디터 활용하기

### 에디터에서 타입스크립트 서버 재시작하기

VSCode나 WebStorm같은 JS IDE에서 프로그래밍하다 보면, 때로는 정의된 타입이 있는 객체임에도 임포트되지 않거나 자동 완성 기능이 동작하지 않는 경우를 종종 볼 수 있다.

이런 상황에서는 TS 서버를 재실행하면 된다. VSCode에서는 **Restart TS server** 기능을 지원하는데 `Command + Shift + P` 윈도우: `Ctrl + Shift + P`를 누르고 실행하면 된다.

WebStorm은 **Typescript tool window** 기능을 지원한다. 에디터의 오른쪽 하단 바에 위치한 **TypeScript** 메뉴에서 **Restart TypeScript Service**를 클릭하면 타입스크립트 서버가 재실행된다.
